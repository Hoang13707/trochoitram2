<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tr√≤ ch∆°i Tr·∫°m 2 - CNTT</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #0b1224;
      color: #f0f4ff;
    }

    /* Banner */
    .banner {
      width: 100%;
      padding: 24px;
      text-align: center;
      background: linear-gradient(90deg, #005bea, #00c6fb);
      color: white;
      font-size: 28px;
      font-weight: bold;
      letter-spacing: 1px;
      border-bottom: 4px solid rgba(255,255,255,0.2);
      text-shadow: 0 0 6px rgba(255,255,255,0.6), 0 0 12px #00c6fb;
    }

    .container {
      max-width: 1100px;
      margin: 20px auto;
      padding: 20px;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
    }

    .status {
      text-align: center;
      margin-bottom: 15px;
      font-size: 18px;
      font-weight: bold;
    }

    .question {
      font-size: 20px;
      margin: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .answers {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin: 15px 0;
    }

    .answer {
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      cursor: pointer;
      font-size: 18px;
      user-select: none;
    }

    .hidden {
      background: rgba(255,255,255,0.2);
      color: transparent;
    }

    .revealed {
      background: linear-gradient(90deg, #053854, #0b6b9a);
      color: white;
      text-shadow: 0 0 6px rgba(255,255,255,0.6);
    }

    .teams {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    .team {
      background: rgba(255,255,255,0.05);
      padding: 15px;
      border-radius: 8px;
    }

    .team h2 {
      margin-top: 0;
      font-size: 18px;
      text-align: center;
    }

    .team input {
      width: 100%;
      padding: 6px;
      margin-bottom: 8px;
      border-radius: 4px;
      border: none;
    }

    .team button {
      margin: 4px;
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-submit { background: #2ecc71; color: white; }

    .controls {
      margin-top: 20px;
      text-align: center;
    }

    .controls button {
      margin: 5px;
      padding: 8px 14px;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }

    .btn-start { background: #3498db; color: white; }
    .btn-next { background: #9b59b6; color: white; }
    .btn-restart { background: #e74c3c; color: white; }

    .message {
      text-align: center;
      font-size: 18px;
      margin-top: 15px;
      font-weight: bold;
      color: #ffcc33;
    }

    /* Puzzle area */
    .puzzle {
      margin-top: 10px;
      padding: 10px;
      background: rgba(0,0,0,0.3);
      border-radius: 6px;
      font-size: 16px;
      font-weight: bold;
    }
    .puzzle input {
      margin-top: 8px;
      padding: 6px;
      border-radius: 4px;
      border: none;
      width: 80%;
    }
    .code {
      margin-top: 8px;
      font-size: 18px;
      font-weight: bold;
      color: #00ff99;
    }

    .countdown {
      margin-top: 6px;
      color: #ff6666;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="banner">üíªInput Chu·∫©n - Output ƒê·ªânhüíª</div>

  <div class="container">
    <div class="status">
      <div id="progress">C√¢u 1/3</div>
    </div>
    <div class="question" id="question">...</div>
    <div class="answers" id="answers"></div>

    <div class="teams">
      <!-- H√†ng tr√™n -->
      <div class="team">
        <h2>ƒê·ªôi A - ƒêi·ªÉm: <span id="scoreA">0</span></h2>
        <input id="inputA" placeholder="Nh·∫≠p 6 ƒë√°p √°n, c√°ch nhau b·ªüi d·∫•u ph·∫©y">
        <button class="btn-submit" onclick="lockAnswers('A')">X√°c nh·∫≠n</button>
        <div id="puzzleA" class="puzzle" style="display:none"></div>
        <div id="countdownA" class="countdown"></div>
      </div>
      <div class="team">
        <h2>ƒê·ªôi B - ƒêi·ªÉm: <span id="scoreB">0</span></h2>
        <input id="inputB" placeholder="Nh·∫≠p 6 ƒë√°p √°n, c√°ch nhau b·ªüi d·∫•u ph·∫©y">
        <button class="btn-submit" onclick="lockAnswers('B')">X√°c nh·∫≠n</button>
        <div id="puzzleB" class="puzzle" style="display:none"></div>
        <div id="countdownB" class="countdown"></div>
      </div>
      <!-- H√†ng d∆∞·ªõi -->
      <div class="team">
        <h2>ƒê·ªôi C - ƒêi·ªÉm: <span id="scoreC">0</span></h2>
        <input id="inputC" placeholder="Nh·∫≠p 6 ƒë√°p √°n, c√°ch nhau b·ªüi d·∫•u ph·∫©y">
        <button class="btn-submit" onclick="lockAnswers('C')">X√°c nh·∫≠n</button>
        <div id="puzzleC" class="puzzle" style="display:none"></div>
        <div id="countdownC" class="countdown"></div>
      </div>
      <div class="team">
        <h2>ƒê·ªôi D - ƒêi·ªÉm: <span id="scoreD">0</span></h2>
        <input id="inputD" placeholder="Nh·∫≠p 6 ƒë√°p √°n, c√°ch nhau b·ªüi d·∫•u ph·∫©y">
        <button class="btn-submit" onclick="lockAnswers('D')">X√°c nh·∫≠n</button>
        <div id="puzzleD" class="puzzle" style="display:none"></div>
        <div id="countdownD" class="countdown"></div>
      </div>
    </div>

    <div class="controls">
      <button class="btn-start" onclick="startRound()" id="startBtn">B·∫Øt ƒë·∫ßu</button>
      <button class="btn-next" onclick="nextQuestion()" style="display:none" id="nextBtn">C√¢u ti·∫øp theo</button>
      <button class="btn-restart" onclick="restartGame()" id="restartBtn">Ch∆°i l·∫°i</button>
    </div>
    <div class="message" id="message"></div>

    <!-- B·∫£ng x·∫øp h·∫°ng -->
    <div id="rankingTable" style="display:none; margin-top:12px;"></div>
  </div>

  <script>
    // ====== DATA: 6 ƒë√°p √°n / m·ªói ƒë√°p √°n c√≥ points 3..6 ======
    const questions = [
      { 
        text: "Nh·ªØng ng√¥n ng·ªØ l·∫≠p tr√¨nh ph·ªï bi·∫øn trong gi·ªõi l·∫≠p tr√¨nh vi√™n?", 
        answers: [
          {text:"Python", points:3}, 
          {text:"Java", points:3}, 
          {text:"C++", points:3}, 
          {text:"JavaScript", points:4}, 
          {text:"C#", points:5}, 
          {text:"PHP", points:6}
        ]
      },
      { 
        text: "Nh·ªØng h·ªá ƒëi·ªÅu h√†nh th√¥ng d·ª•ng cho m√°y t√≠nh c√° nh√¢n?", 
        answers: [
          {text:"Windows", points:3}, 
          {text:"Linux", points:3}, 
          {text:"macOS", points:3}, 
          {text:"Ubuntu", points:5}, 
          {text:"ChromeOS", points:4}, 
          {text:"Fedora", points:6}
        ]
      },
      { 
        text: "Nh·ªØng c√¥ng ty c√¥ng ngh·ªá n·ªïi ti·∫øng tr√™n th·∫ø gi·ªõi?", 
        answers: [
          {text:"Apple", points:3}, 
          {text:"Google", points:3}, 
          {text:"Microsoft", points:3}, 
          {text:"Samsung", points:4}, 
          {text:"Amazon", points:5}, 
          {text:"Intel", points:6}
        ]
      },
      { 
  text: "Nh·ªØng thi·∫øt b·ªã ngo·∫°i vi ph·ªï bi·∫øn c·ªßa m√°y t√≠nh?", 
  answers: [
    {text:"Chu·ªôt", points:3}, 
    {text:"B√†n ph√≠m", points:3}, 
    {text:"M√†n h√¨nh", points:3}, 
    {text:"M√°y in", points:4}, 
    {text:"Loa", points:5}, 
    {text:"Webcam", points:6}
  ]
},
{ 
  text: "Nh·ªØng lƒ©nh v·ª±c n·ªïi b·∫≠t trong ng√†nh C√¥ng ngh·ªá th√¥ng tin?", 
  answers: [
    {text:"Tr√≠ tu·ªá nh√¢n t·∫°o", points:3}, 
    {text:"An ninh m·∫°ng", points:3}, 
    {text:"Khoa h·ªçc d·ªØ li·ªáu", points:3}, 
    {text:"Ph√°t tri·ªÉn ph·∫ßn m·ªÅm", points:4}, 
    {text:"M·∫°ng m√°y t√≠nh", points:5}, 
    {text:"ƒêi·ªán to√°n ƒë√°m m√¢y", points:6}
  ]
}   
    ];

    // ====== PUZZLES cho ph·∫ßn cu·ªëi (m·∫≠t m√£) ======
    const puzzles = [
      { q: 'Giao th·ª©c gi√∫p b·∫°n g√µ "www." ƒë·ªÉ v√†o trang web c√≥ t√™n vi·∫øt t·∫Øt HTTP. ƒê·∫øm s·ªë ch·ªØ c√°i trong m·ªói t·ª´ ƒë·∫ßy ƒë·ªß: Hyper ‚Äì Text ‚Äì Transfer ‚Äì Protocol, r·ªìi gh√©p l·∫°i. M√£ l√† g√¨?', a: "5488", code: "5488" },
      { q: 'ƒê·ªïi s·ªë nh·ªã ph√¢n 10000000000 sang h·ªá th·∫≠p ph√¢n, b·∫°n s·∫Ω ƒë∆∞·ª£c m·∫≠t m√£ 4 ch·ªØ s·ªë l√† g√¨?', a: "1024", code: "1024" },
      { q: 'Ba ch·ªØ c√°i vi·∫øt t·∫Øt ch·ªâ ‚Äúb·ªô n√£o‚Äù c·ªßa m√°y t√≠nh l√† C, P, U. N·∫øu ƒë·ªïi m·ªói ch·ªØ sang s·ªë theo b·∫£ng ch·ªØ c√°i (A=1, B=2, ‚Ä¶) r·ªìi nh√¢n l·∫°i, th√¨ m·∫≠t m√£ 4 ch·ªØ s·ªë l√† g√¨?', a: "1008", code: "1008" },
      { q: 'Cho tr∆∞·ªõc: üíª + üíª = 80; üì± + üì± + üì± = 36 ; üíª + üì± + üì∫ = 70. C·∫ßn t√≠nh: üíª x üì± x üì∫ = ?', a: "8640", code: "8640" }
    ];

    // ====== tr·∫°ng th√°i ======
    let currentQ = 0;
    let scoreA = 0, scoreB = 0, scoreC = 0, scoreD = 0;
    let answersA = [], answersB = [], answersC = [], answersD = [];
    let puzzleMap = {};
    let countdownTimer = null;

    // Hi·ªÉn th·ªã c√¢u + 6 √¥ ·∫©n
    function renderQuestion() {
      const q = questions[currentQ];
      document.getElementById("question").textContent = q.text;
      document.getElementById("progress").textContent = `C√¢u ${currentQ+1}/${questions.length}`;
      const ansDiv = document.getElementById("answers");
      ansDiv.innerHTML = "";
      q.answers.forEach((ans,i)=>{
        const div = document.createElement("div");
        div.className = "answer hidden";
        div.id = `ans${i}`;
        // hi·ªÉn th·ªã text (nh∆∞ng v√¨ class hidden color:transparent n√™n s·∫Ω ·∫©n), khi l·∫≠t s·∫Ω show k√®m ƒëi·ªÉm
        div.textContent = ans.text;
        div.onclick = () => revealAnswer(i);
        ansDiv.appendChild(div);
      });
      document.getElementById("message").textContent="";
      document.getElementById("nextBtn").style.display="none";
      document.getElementById("rankingTable").style.display = "none";
      document.getElementById("rankingTable").innerHTML = "";
      // ·∫©n puzzle sections (n·∫øu c√≤n)
      ["A","B","C","D"].forEach(t=>{
        document.getElementById("puzzle"+t).style.display="none";
        document.getElementById("puzzle"+t).innerHTML="";
        document.getElementById("countdown"+t).textContent="";
      });
    }

    // L∆∞u ƒë√°p √°n c·ªßa t·ª´ng ƒë·ªôi (input: "a,b,c,...")
    function lockAnswers(team){
      const input = document.getElementById("input"+team).value.trim();
      if(!input) return;
      const arr = input.split(",").map(a=>a.trim().toLowerCase()).filter(a=>a!=="");
      if(team==="A") answersA = arr;
      else if(team==="B") answersB = arr;
      else if(team==="C") answersC = arr;
      else if(team==="D") answersD = arr;
      document.getElementById("input"+team).disabled = true;
    }

    // B·∫Øt ƒë·∫ßu l∆∞·ª£t (·∫©n/ƒë·∫∑t l·∫°i tr·∫°ng th√°i ·∫©n cho √¥ ƒë√°p √°n)
    function startRound(){
      document.querySelectorAll(".answer").forEach(el=>{
        el.className="answer hidden";
      });
      document.getElementById("message").textContent="Click v√†o t·ª´ng √¥ ƒë·ªÉ l·∫≠t ƒë√°p √°n!";
    }

    // L·∫≠t 1 ƒë√°p √°n (c·ªông ƒëi·ªÉm t∆∞∆°ng ·ª©ng cho ƒë·ªôi ƒë√£ ƒëo√°n ƒë√∫ng)
    function revealAnswer(i){
      const q = questions[currentQ];
      const div = document.getElementById("ans"+i);
      if(!div || div.classList.contains("revealed")) return;
      div.className="answer revealed";

      const ansText = q.answers[i].text;
      const ansLower = ansText.toLowerCase();
      const pts = q.answers[i].points;

      // hi·ªÉn th·ªã c√πng ƒëi·ªÉm
      div.textContent = `${ansText} (+${pts}ƒë)`;

      // c·ªông ƒëi·ªÉm n·∫øu ƒë·ªôi ƒë√£ nh·∫≠p ƒë√°p √°n ƒë√≥
      if(answersA.includes(ansLower)){ scoreA+=pts; document.getElementById("scoreA").textContent=scoreA; }
      if(answersB.includes(ansLower)){ scoreB+=pts; document.getElementById("scoreB").textContent=scoreB; }
      if(answersC.includes(ansLower)){ scoreC+=pts; document.getElementById("scoreC").textContent=scoreC; }
      if(answersD.includes(ansLower)){ scoreD+=pts; document.getElementById("scoreD").textContent=scoreD; }

      // n·∫øu t·∫•t c·∫£ √¥ ƒë√£ l·∫≠t -> k·∫øt th√∫c c√¢u
      const allRevealed = [...document.querySelectorAll(".answer")]
                          .every(el=>el.classList.contains("revealed"));
      if(allRevealed) endQuestion();
    }

    function endQuestion(){
      if(currentQ < questions.length-1){
        document.getElementById("message").textContent=`Xong c√¢u ${currentQ+1}, m·ªùi qua c√¢u ti·∫øp theo`;
        document.getElementById("nextBtn").style.display="inline-block";
      } else {
        // hi·ªÉn th·ªã b·∫£ng x·∫øp h·∫°ng v√† m·ªü puzzle theo th·ª© t·ª±
        showRanking();
      }
    }

    function nextQuestion(){
      currentQ++;
      // reset inputs cho ƒë·ªôi
      ["A","B","C","D"].forEach(t=>{
        document.getElementById("input"+t).value="";
        document.getElementById("input"+t).disabled=false;
      });
      answersA=[]; answersB=[]; answersC=[]; answersD=[];
      renderQuestion();
    }

    function restartGame(){
      if(countdownTimer) { clearInterval(countdownTimer); countdownTimer = null; }
      currentQ=0; scoreA=0; scoreB=0; scoreC=0; scoreD=0;
      ["A","B","C","D"].forEach(t=>{
        document.getElementById("score"+t).textContent=0;
        document.getElementById("input"+t).value="";
        document.getElementById("input"+t).disabled=false;
        document.getElementById("puzzle"+t).style.display="none";
        document.getElementById("puzzle"+t).innerHTML="";
        document.getElementById("countdown"+t).textContent="";
      });
      puzzleMap = {};
      document.getElementById("rankingTable").style.display = "none";
      document.getElementById("rankingTable").innerHTML = "";
      document.getElementById("message").textContent = "";
      answersA=[]; answersB=[]; answersC=[]; answersD=[];
      renderQuestion();
    }

    // Hi·ªÉn th·ªã b·∫£ng x·∫øp h·∫°ng ·ªü cu·ªëi, v√† g√°n puzzle cho t·ª´ng ƒë·ªôi theo th·ª© t·ª± x·∫øp h·∫°ng
    function showRanking(){
      let results = [
        {team:"A",score:scoreA},
        {team:"B",score:scoreB},
        {team:"C",score:scoreC},
        {team:"D",score:scoreD}
      ];
      results.sort((a,b)=>{
        if(b.score !== a.score) return b.score - a.score;
        return a.team.localeCompare(b.team);
      });

      const rankingTable = document.getElementById("rankingTable");
      let tableHTML = `<table style="width:100%; border-collapse:collapse; margin-top:8px;">
        <thead><tr>
          <th style="text-align:left; padding:8px;">Th·ª© h·∫°ng</th>
          <th style="text-align:left; padding:8px;">ƒê·ªôi</th>
          <th style="text-align:left; padding:8px;">ƒêi·ªÉm</th>
        </tr></thead><tbody>`;
      results.forEach((r, idx) => {
        let medal = idx===0?"ü•á":idx===1?"ü•à":idx===2?"ü•â":"";
        tableHTML += `<tr>
          <td style="padding:8px;">${medal} ${idx+1}</td>
          <td style="padding:8px;">ƒê·ªôi ${r.team}</td>
          <td style="padding:8px;">${r.score}</td>
        </tr>`;
      });
      tableHTML += `</tbody></table>`;
      rankingTable.innerHTML = tableHTML;
      rankingTable.style.display = "block";

      // g√°n puzzle (x√°o tr·ªôn) cho t·ª´ng ƒë·ªôi theo th·ª© t·ª± (top1 -> puzzle 0, ...)
      let shuffled = [...puzzles].sort(()=>Math.random()-0.5);
      results.forEach((r,i)=>{ puzzleMap[r.team] = shuffled[i % shuffled.length]; });

      // reset puzzle & countdown hi·ªÉn th·ªã
      ["A","B","C","D"].forEach(t=>{
        document.getElementById("puzzle"+t).style.display="none";
        document.getElementById("puzzle"+t).innerHTML="";
        document.getElementById("countdown"+t).textContent="";
      });

      // m·ªü puzzle theo th·ª© t·ª±: top1 ngay, top2 sau 5s, top3 sau 10s, top4 sau 15s (s·ª≠ d·ª•ng ƒë·∫øm ng∆∞·ª£c t·ª´ng ƒë·ªôi)
      unlockSequentially(results, 0);
    }

    // m·ªü l·∫ßn l∆∞·ª£t (ƒë·ªá quy)
    function unlockSequentially(results, idx){
      if(idx >= results.length) return;
      let r = results[idx];
      const team = r.team;
      if(idx===0){
        showPuzzle(team);
        // ti·∫øp t·ª•c m·ªü cho c√°c ƒë·ªôi ti·∫øp theo
        unlockSequentially(results, idx+1);
      } else {
        let time = 5;
        const cdDiv = document.getElementById("countdown"+team);
        cdDiv.textContent = "M·ªü sau: " + time + "s";
        // d√πng interval, khi h·∫øt th√¨ m·ªü puzzle v√† g·ªçi ti·∫øp
        countdownTimer = setInterval(()=>{
          time--;
          if(time <= 0){
            clearInterval(countdownTimer);
            countdownTimer = null;
            cdDiv.textContent = "";
            showPuzzle(team);
            unlockSequentially(results, idx+1);
          } else {
            cdDiv.textContent = "M·ªü sau: " + time + "s";
          }
        }, 1000);
      }
    }

    // hi·ªÉn th·ªã puzzle cho 1 ƒë·ªôi
    function showPuzzle(team){
      const p = puzzleMap[team];
      const div = document.getElementById("puzzle"+team);
      div.style.display = "block";
      // input id ri√™ng ƒë·ªÉ kh√¥ng conflict: puzzleInp{team}
      div.innerHTML = `<div style="font-size:15px; margin-bottom:6px; text-align:left;">${p.q}</div>
        <input id="puzzleInp${team}" placeholder="Nh·∫≠p ƒë√°p √°n">
        <button onclick="checkPuzzle('${team}')">X√°c nh·∫≠n</button>
        <div class="code" id="code${team}"></div>`;
    }

    // ki·ªÉm tra ƒë√°p √°n puzzle
    function checkPuzzle(team){
      const inp = document.getElementById("puzzleInp"+team);
      if(!inp) return;
      const ans = inp.value.trim();
      const puzzle = puzzleMap[team];
      if(!puzzle) return;
      if(ans === puzzle.a){
        document.getElementById("code"+team).textContent = "M√£ c·ªßa b·∫°n: " + puzzle.code;
      } else {
        document.getElementById("code"+team).textContent = "Sai, th·ª≠ l·∫°i!";
      }
    }

    // g·ªçi render l√∫c load trang
    window.onload = () => { renderQuestion(); };
  </script>
</body>
</html>



